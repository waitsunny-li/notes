### 1.http是啥？

http协议即按一定的规则，向服务器要数据，或发送数据，而服务器按一定的规则，回应数据。



### 2.当你打开一个页面时，发生了什么？







### 3.HTTP请求信息和响应的格式

请求：

1. 请求行

   - 请求行又分为三个部分：

     - 请求方法

     - 请求路径

     - 所用的协议

     - 我们使用get请求数据时

       

       ```http
       GET /0606/02.php HTTP/1.1  //请求行信息
       Host: localhost				// 请求地址
       
       HTTP/1.1 200 OK
       ....
       ```

       - 当我们使用post请求发送数据时

         ```http
         POST /0606/03.php HTTP/1.1
         Host: localhost	
         Content-type: application/x-www-form-uselencoded               // 当我post请求时，要发送数据，必须有Content-type,表明是要发送的数据是什么类型，这样服务器才能解析出来
         Content-length: 23 					// 还需要告诉发送的数据长度，这样服务器才知道有数据发送过来，坐等接受，而不是直接响应
         
         username=zhangsan&age=9
         ```

         

2. 请求头信息

3. 请求主体信息



#### 4.请求方法有哪些?（有些方法虽然HTTP协议有规定，但是WEB SERVER未必允许或支持这些方法）

- HEAD：和GET基本一致 ，只是返回响应头，而不会返回内容，比我我们只是确认一下网站的（比如照片），就可以使用。
- TRACE: 是你用了代理上网，比如用代理访问new.163.com，你想看看代理有没有修改你的HTTP请求，可以用TRACE来测试一下，163.com的服务器就会把最后收到的请求返回给你
- OPTIONS: 是返回服务器可用的请求方法



### 5.常见的错误码

- 200  ---  服务器成功返回网页
- 301/2  ----  永久/临时重定向
- 304 Not Modified  ---- 未修改
  - if-modified-since: Sat, 20 Jun 2020 10:01:06 GMT
  - if-none-match: W/"5eedde62-13cd0"
  - 浏览器再次刷新时，会把这些参数发送给我服务器，服务器进行对比，如果没有修改，那么就不用返回数据，如果修改，就重新返回数据给客户端
- 307 ----  重定向中保持原有的请求数据
- 404 ----  请求的网页不存在
- 503 ----  服务器暂时不可用
- 500 ----  服务器内部错误



### 6.HTTP防盗链

> 当我们在网页里引用站外的图片时，常出现这样的情况（就是显示不出来，或者过两天就显示不出来）?
>
> 还有在网站的统计结果，统计用户从何而来？

##### 在Http协议中，头信息里有一个重要的选项：`Referer`

`Referer`: 代表网页的来源，即上一页的地址

如果是直接在浏览器输入地址，进入，是没有Referer头

这也是：为什么服务器知道我们的图片是从哪儿引用的，越知道我们的客户从哪个网站链接点击过来的

**问题：如何配置Apache服务器，用于图片防盗链？**

*原理：在web服务器层面，根据http协议的referer头信息，来判断。*

如果来自站外，则统一重写到一个很小的防盗链提醒图片上去



**具体步骤：**

1. 打开Apache重写模块mod_rewrite
2. 在需要防盗的网站或目录，写.htaccess文件
3. 并指定防盗链规则

如何指定？

自然是分析referer信息，